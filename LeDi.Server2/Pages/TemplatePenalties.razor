@page "/TemplatePenalties/{SelectedTemplateId:int}"
@inject Microsoft.Extensions.Localization.IStringLocalizer<TemplatePenalties> Localizer

<PageTitle>LeDi - @Localizer["TemplatePenalties"]</PageTitle>


<AuthorizeView Roles="Att-CanTemplateAdd,Att-CanTemplateEdit,Att-CanTemplateDelete,Att-CanTemplateManage,Att-IsAdmin">
    <Authorized>

        <div class="container-fluid">

            @if (SelectedTemplate == null)
            {
                <p><em>@Localizer["Loading"]</em></p>
            }
            else
            {
                <a href="/templatepenaltyadd/@SelectedTemplate.Id" class="fs-5 btn btn-primary"><i class="fas fa-arrow-right" aria-hidden="true"></i> @Localizer["NewPenalty"]</a>

                <br />
                <br />

                <table class="table table-striped table-hover table-responsive-sm">
                    <thead>
                        <tr>
                            <th>@Localizer["PenaltyName"]</th>
                            <th>@Localizer["PenaltyDescription"]</th>
                            <th>@Localizer["PenaltyTime"]</th>
                            <th>@Localizer["TotalDismissal"]</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (SelectedTemplate.PenaltyList != null)
                        {                         
                            @foreach(var aPenalty in SelectedTemplate.PenaltyList)
                            {
                                <tr>
                                    <td>@aPenalty.Name</td>
                                    <td>@for(var i = 0; i < aPenalty.Display.Count; i++)
                                        {
                                            <a>@aPenalty.Display[i].Language: @aPenalty.Display[i].Text (@aPenalty.Display[i].Id, @aPenalty.Display[i].TemplatePenaltyItem.Id)</a>
                                            @if (i != aPenalty.Display.Count-1)
                                            {
                                                <br />
                                            }
                                        }
                                    </td>
                                    <td>@aPenalty.PenaltySeconds @Localizer["Seconds"]</td>
                                    <td>@(aPenalty.TotalDismissal ? Localizer["Yes"] : Localizer["No"])</td>
                                    <td>
                                        <AuthorizeView Roles="Att-CanTemplateEdit,Att-IsAdmin" Context="y">
                                            <Authorized>
                                                <a href="/templatepenaltyadd/@SelectedTemplate.Id/@aPenalty.Id" class="btn btn-primary"><span class="oi oi-pencil" aria-hidden="true"></span> @Localizer["Edit"]</a>
                                            </Authorized>
                                        </AuthorizeView>
                                    </td>
                                    <td>
                                        <AuthorizeView Roles="Att-CanTemplateDelete,Att-IsAdmin" Context="y">
                                            <Authorized>
                                                <a href="/templatepenaltyadd/@SelectedTemplate.Id" class="btn btn-danger"><span class="oi oi-trash" aria-hidden="true"></span> @Localizer["Delete (todo)"]</a>
                                            </Authorized>
                                        </AuthorizeView>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            }
        </div>
    </Authorized>
    <NotAuthorized>
        <p>@Localizer["NoPermissions"]</p>
    </NotAuthorized>
</AuthorizeView>